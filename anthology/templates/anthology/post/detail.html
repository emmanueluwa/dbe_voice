{% extends 'anthology/base.html' %}
{% load  anthology_tags %}
{% block title %}{{ post.title }}
{%endblock%} {% block content %}
<h1>{{ post.title }}</h1>
<p class="date">Published {{ post.publish }} by {{ post.author }}</p>
{{ post.body|markdown_ }} 
<p>
  <a href="{% url "anthology:post_share" post.id %}">
  Share this post
  </a>
</p>
<h2>Similar posts</h2>
{% for post in similar_posts %}
<p>
    <a href="{{ post.get_absolute_url }}">
        {{ post.title }}
    </a>
</p>
{% empty %}
There are no similar posts yet.
{% endfor %}
 {% comment %} with template helps avoid hitting db or accessing expensive methods(eg template parsing) multiple times {% endcomment %}
{% with comments.count as total_comments %}
<h2>
{{ total_comments }} comment{{ total_comments|pluralize }}
</h2>
{% endwith %}

{% comment %} active comments {% endcomment %}
{% for comment in comments %}
  <div class="comment">
    <p class="info">
      Comment {{ forloop.counter }} by {{ comment.username }} {{ comment.created }}
    </p>
    {{ comment.body|linebreaks }}
  </div>
  {% empty %}
  <p>There are no comments.</p>
{% endfor %}
{% include "anthology/post/includes/comment_form.html" %}
{% endblock %}
